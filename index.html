<!DOCTYPE HTML>
<html>

<head>
    <title>Geometric-Aware 4D Video Generation</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1000">
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="icon" href="assets/video-player.png">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LS6L6LB7RX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-LS6L6LB7RX');
    </script>

    <meta property="og:url" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Geometry-aware 4D Video Generation for Robot Manipulation" />
    <meta property="og:description" content="" />

    <style>
        .video-compare-container {
            position: relative;
            max-width: 75%;
            margin: 0 auto;
            overflow: hidden;
            border: 2px solid #333;
            cursor: col-resize;
            aspect-ratio: 32/11;
            transition: border-color 0.2s ease;
            margin-bottom: 1em;
        }

        .video-compare-container:hover {
            border-color: #555;
        }

        .video-canvas {
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .rgb-video {
            left: 0;
            clip-path: inset(0 50% 0 0);
        }

        .depth-video {
            right: 0;
            clip-path: inset(0 0 0 50%);
        }

        .divider {
            position: absolute;
            top: 0;
            left: 50%;
            width: 4px;
            height: 100%;
            background: #fff;
            cursor: col-resize;
            z-index: 10;
            transform: translateX(-2px);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            background: #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .divider::after {
            content: '‚ü∑';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            color: #000;
            font-weight: bold;
        }

        .labels {
            position: absolute;
            top: 10px;
            left: 0;
            right: 0;
            z-index: 5;
            pointer-events: none;
        }

        .label {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            font-size: 14px;
            font-weight: bold;
            border-radius: 4px;
        }

        .label-left {
            left: 10px;
        }

        .label-right {
            right: 10px;
        }

        .navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 15px;
            margin-bottom: 10px;
            gap: 20px;
        }

        .nav-arrow {
            background: #333;
            color: white;
            border: 1px solid #555;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-arrow:hover {
            background: #555;
            transform: scale(1.1);
        }

        .nav-arrow:disabled {
            background: #222;
            color: #666;
            cursor: not-allowed;
            transform: none;
        }

        .video-info {
            background: rgba(51, 51, 51, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            min-width: 120px;
            text-align: center;
            font-size: 14px;
        }

        .controls {
            margin-top: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .controls button {
            background: #333;
            color: white;
            border: 1px solid #555;
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 4px;
        }

        .controls button:hover {
            background: #555;
        }

        .controls button:disabled {
            background: #222;
            color: #666;
            cursor: not-allowed;
        }
    </style>
</head>

<body id="top">

    <!-- Main -->
    <div id="main"
        style="padding-bottom:1em; padding-top: 5em; width: 70em; max-width: 70em; margin-left: auto; margin-right: auto;">

        <h2 style="text-align: center; white-space: nowrap; font-size: 200%">
            Geometry-aware 4D Video Generation for Robot Manipulation
        </h2>

        <div style="text-align: center; margin: 1em 0 0 0;">
            <video autoplay loop muted playsinline style="width: 80%; max-width: 800px;">
                <source src="videos/teaser.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <!-- TLDR Section -->
        <div class="tldr-section">
            <div class="tldr-content">
                We propose a 4D video generation model that enforces geometric consistency across multiple views to
                produce spatio-temporally aligned RGB-D videos from a single RGB-D image per view. We further
                demonstrate its utility in downstream robot manipulation tasks through pose tracking.
            </div>
        </div>

        <!-- <div style="text-align: center; margin: 2em 0 -1em 0;">
            <video controls autoplay loop muted playsinline style="width: 80%; max-width: 800px;">
                <source src="videos/real.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div> -->

        <hr>
        <h3>Method</h3>
        <div style="text-align: center; margin: 2em 0;">
            <img src="assets/method.png" alt="Method Overview"
                style="width: 100%; max-width: 100%; height: auto; border: 1px solid #ddd; border-radius: 4px;">
            <p style="font-style: italic; color: #666; margin-top: 0.5em; font-size: 0.9em;">
                4D Video Generation for Robot Manipulation. Our model takes RGB-D observations from two camera views,
                and predicts future pointmaps and RGB videos.
                To ensure cross-view consistency, we apply cross-attention in the U-Net decoders for pointmap
                prediction. The resulting 4D video can be used to extract the 6DoF pose of the robot end-effector using
                pose tracking methods, enabling downstream manipulation tasks.
            </p>
        </div>

        <hr>
        <h3>Results</h3>
        <h4> (a) StoreCerealBoxUnderShelf ü•£</h4>
        In this task, a single robot arm picks up a cereal box from the top of a shelf and
        inserts it into the shelf below. Occlusions occur during insertion, especially from certain camera viewpoints,
        making multi-view predictions essential. Additionally, the pick-and-insert action requires spatial understanding
        and precision.

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <div style="text-align: center; margin-bottom: 15px;">
                <strong>Ground-truth RGB-D videos</strong>
            </div>
            <div class="video-compare-container" id="container1">
                <video class="video-canvas rgb-video" id="rgbVideo1" loop muted preload="metadata" autoplay onloadeddata="setupVideo(1)">
                    <source src="videos/task_1/gt_rgb_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <video class="video-canvas depth-video" id="depthVideo1" loop muted preload="metadata" autoplay onloadeddata="setupVideo(1)">
                    <source src="videos/task_1/gt_depth_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="divider" id="divider1"></div>
                
                <div class="labels">
                    <div class="label label-left">RGB</div>
                    <div class="label label-right">DEPTH</div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-arrow" id="prevBtn1" onclick="switchVideo1(-1)">‚Üê</button>
                <div class="video-info" id="videoInfo1">Result 1 of 2</div>
                <button class="nav-arrow" id="nextBtn1" onclick="switchVideo1(1)">‚Üí</button>
            </div>
            
            <div class="controls">
                <button onclick="togglePlayback(1)" id="playButton1">Play</button>
            </div>

            <div style="text-align: center; margin: 15px 0;">
                <strong>Generated RGB-D videos (unseen views)</strong>
            </div>
            <div class="video-compare-container" id="container2">
                <video class="video-canvas rgb-video" id="rgbVideo2" loop muted preload="metadata" autoplay onloadeddata="setupVideo(2)">
                    <source src="videos/task_1/ours/rgb_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <video class="video-canvas depth-video" id="depthVideo2" loop muted preload="metadata" autoplay onloadeddata="setupVideo(2)">
                    <source src="videos/task_1/ours/depth_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="divider" id="divider2"></div>
                
                <div class="labels">
                    <div class="label label-left">RGB</div>
                    <div class="label label-right">DEPTH</div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-arrow" id="prevBtn2" onclick="switchVideo2(-1)">‚Üê</button>
                <div class="video-info" id="videoInfo2">Result 1 of 2</div>
                <button class="nav-arrow" id="nextBtn2" onclick="switchVideo2(1)">‚Üí</button>
            </div>
            
            <div class="controls">
                <button onclick="togglePlayback(2)" id="playButton2">Play</button>
            </div>
        </div>

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <h4>Baselines:</h4>
            <div class="row 50% uniform" style="width: 100%;">
                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/baselines/without_attn.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS without cross-attention (RGB)
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/baselines/without_attn_depth.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS without cross-attention (depth)
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/baselines/svd.mp4" type="video/mp4">
                        </video>
                    </span>
                    SVD
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/baselines/svd_attn.mp4" type="video/mp4">
                        </video>
                    </span>
                    SVD w/ cross-attention
                </div>
            </div>
        </div>

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <h4>Policy Rollout (unseen views):</h4>
            <div class="row 50% uniform" style="width: 100%;">
                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/ours.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/ours_2.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS
                </div>
            </div>
            <div class="row 50% uniform" style="width: 100%;">
                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/dp_2.mp4" type="video/mp4">
                        </video>
                    </span>
                    Diffusion Policy <span style="color: red";>fails to insert the cereal box</span>
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_1/dp.mp4" type="video/mp4">
                        </video>
                    </span>
                    Diffusion Policy <span style="color: red";>fails to pick up the cereal box</span>
                </div>
            </div>
        </div>

        <h4> (b) PutSpatulaOnTable üë©‚Äçüç≥</h4>
        A single robot arm retrieves a spatula from a utensil crock and places it on the left side of the table. This
        task requires precise manipulation to successfully grasp the narrow object.

 
        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <div style="text-align: center; margin-bottom: 15px;">
                <strong>Ground-truth RGB-D videos</strong>
            </div>
            <div class="video-compare-container" id="container3">
                <video class="video-canvas rgb-video" id="rgbVideo3" loop muted preload="metadata" autoplay onloadeddata="setupVideo(3)">
                    <source src="videos/task_2/gt_rgb_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <video class="video-canvas depth-video" id="depthVideo3" loop muted preload="metadata" autoplay onloadeddata="setupVideo(3)">
                    <source src="videos/task_2/gt_depth_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="divider" id="divider3"></div>
                
                <div class="labels">
                    <div class="label label-left">RGB</div>
                    <div class="label label-right">DEPTH</div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-arrow" id="prevBtn3" onclick="switchVideo3(-1)">‚Üê</button>
                <div class="video-info" id="videoInfo3">Result 1 of 2</div>
                <button class="nav-arrow" id="nextBtn3" onclick="switchVideo3(1)">‚Üí</button>
            </div>
            
            <div class="controls">
                <button onclick="togglePlayback(3)" id="playButton3">Play</button>
            </div>

            <div style="text-align: center; margin: 15px 0;">
                <strong>Generated RGB-D videos (unseen views)</strong>
            </div>
            <div class="video-compare-container" id="container4">
                <video class="video-canvas rgb-video" id="rgbVideo4" loop muted preload="metadata" autoplay onloadeddata="setupVideo(4)">
                    <source src="videos/task_2/ours/rgb_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <video class="video-canvas depth-video" id="depthVideo4" loop muted preload="metadata" autoplay onloadeddata="setupVideo(4)">
                    <source src="videos/task_2/ours/depth_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="divider" id="divider4"></div>
                
                <div class="labels">
                    <div class="label label-left">RGB</div>
                    <div class="label label-right">DEPTH</div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-arrow" id="prevBtn4" onclick="switchVideo4(-1)">‚Üê</button>
                <div class="video-info" id="videoInfo4">Result 1 of 2</div>
                <button class="nav-arrow" id="nextBtn4" onclick="switchVideo4(1)">‚Üí</button>
            </div>
            
            <div class="controls">
                <button onclick="togglePlayback(4)" id="playButton4">Play</button>
            </div>
        </div>

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <h4>Baselines:</h4>
            <div class="row 50% uniform" style="width: 100%;">
                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_2/baselines/without_attn.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS without cross-attention (RGB)
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_2/baselines/without_attn_depth.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS without cross-attention (depth)
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_2/baselines/svd.mp4" type="video/mp4">
                        </video>
                    </span>
                    SVD
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_2/baselines/svd_attn.mp4" type="video/mp4">
                        </video>
                    </span>
                    SVD with cross-attention
                </div>
            </div>
        </div>

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <h4>Policy Rollout (unseen views):</h4>
            <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
                <div class="row 50% uniform" style="width: 100%;">
                    <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                        <span class="image fit" style="margin-bottom: 0.5em;">
                            <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                                <source src="videos/task_2/ours.mp4" type="video/mp4">
                            </video>
                        </span>
                        OURS
                    </div>
    
                    <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                        <span class="image fit" style="margin-bottom: 0.5em;">
                            <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                                <source src="videos/task_2/dp.mp4" type="video/mp4">
                            </video>
                        </span>
                        Diffusion Policy <span style="color: red";>fails to grasp the spatula</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <h4>Real World Results:</h4>
            <div style="text-align: center; margin-bottom: 15px;">
                <strong>Generated RGB-D videos</strong>
            </div>
            <div class="video-compare-container" id="container7">
                <video class="video-canvas rgb-video" id="rgbVideo7" loop muted preload="metadata" autoplay onloadeddata="setupVideo(7)">
                    <source src="videos/task_2/real/rgb.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <video class="video-canvas depth-video" id="depthVideo7" loop muted preload="metadata" autoplay onloadeddata="setupVideo(7)">
                    <source src="videos/task_2/real/depth.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="divider" id="divider7"></div>
                
                <div class="labels">
                    <div class="label label-left">RGB</div>
                    <div class="label label-right">DEPTH</div>
                </div>
            </div>
            
            <div class="controls">
                <button onclick="togglePlayback(7)" id="playButton7">Play</button>
            </div>
        </div>

        <br>
        <h4> (c) PlaceAppleFromBowlIntoBin üçé</h4>
        One robot arm picks up an apple from a bowl on the left side of the table and places it on a shelf; a second arm
        then picks up the apple and deposits it into a bin on the right side. This is a long-horizon, bimanual task that
        tests the model's ability to predict both temporally and spatially consistent trajectories.

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <div style="text-align: center; margin-bottom: 15px;">
                <strong>Ground-truth RGB-D videos</strong>
            </div>
            <div class="video-compare-container" id="container5">
                <video class="video-canvas rgb-video" id="rgbVideo5" loop muted preload="metadata" autoplay onloadeddata="setupVideo(5)">
                    <source src="videos/task_3/gt_rgb_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <video class="video-canvas depth-video" id="depthVideo5" loop muted preload="metadata" autoplay onloadeddata="setupVideo(5)">
                    <source src="videos/task_3/gt_depth_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="divider" id="divider5"></div>
                
                <div class="labels">
                    <div class="label label-left">RGB</div>
                    <div class="label label-right">DEPTH</div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-arrow" id="prevBtn5" onclick="switchVideo5(-1)">‚Üê</button>
                <div class="video-info" id="videoInfo5">GT 1 of 2</div>
                <button class="nav-arrow" id="nextBtn5" onclick="switchVideo5(1)">‚Üí</button>
            </div>
            
            <div class="controls">
                <button onclick="togglePlayback(5)" id="playButton5">Play</button>
            </div>

            <div style="text-align: center; margin: 15px 0;">
                <strong>Generated RGB-D videos (unseen views)</strong>
            </div>
            <div class="video-compare-container" id="container6">
                <video class="video-canvas rgb-video" id="rgbVideo6" loop muted preload="metadata" autoplay onloadeddata="setupVideo(6)">
                    <source src="videos/task_3/ours/rgb_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <video class="video-canvas depth-video" id="depthVideo6" loop muted preload="metadata" autoplay onloadeddata="setupVideo(6)">
                    <source src="videos/task_3/ours/depth_1.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="divider" id="divider6"></div>
                
                <div class="labels">
                    <div class="label label-left">RGB</div>
                    <div class="label label-right">DEPTH</div>
                </div>
            </div>

            <div class="navigation">
                <button class="nav-arrow" id="prevBtn6" onclick="switchVideo6(-1)">‚Üê</button>
                <div class="video-info" id="videoInfo6">Result 1 of 2</div>
                <button class="nav-arrow" id="nextBtn6" onclick="switchVideo6(1)">‚Üí</button>
            </div>
            
            <div class="controls">
                <button onclick="togglePlayback(6)" id="playButton6">Play</button>
            </div>
        </div>

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <h4>Baselines:</h4>
            <div class="row 50% uniform" style="width: 100%;">
                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_3/baselines/without_attn.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS without cross-attention (RGB)
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_3/baselines/without_attn_depth.mp4" type="video/mp4">
                        </video>
                    </span>
                    OURS without cross-attention (depth)
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_3/baselines/svd.mp4" type="video/mp4">
                        </video>
                    </span>
                    SVD
                </div>

                <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                    <span class="image fit" style="margin-bottom: 0.5em;">
                        <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                            <source src="videos/task_3/baselines/svd_attn.mp4" type="video/mp4">
                        </video>
                    </span>
                    SVD with cross-attention
                </div>
            </div>
        </div>

        <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
            <h4>Policy Rollout (unseen views):</h4>
            <div class="box alt" style="margin-top:1em; margin-bottom: 1em;">
                <div class="row 50% uniform" style="width: 100%;">
                    <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                        <span class="image fit" style="margin-bottom: 0.5em;">
                            <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                                <source src="videos/task_3/ours.mp4" type="video/mp4">
                            </video>
                        </span>
                        OURS
                    </div>
    
                    <div class="2u" style="font-size: 1em; line-height: 1.5em; text-align: center; width: 50%">
                        <span class="image fit" style="margin-bottom: 0.5em;">
                            <video controls autoplay loop muted playsinline style="width: 100%; margin-right: 5%;">
                                <source src="videos/task_3/dp.mp4" type="video/mp4">
                            </video>
                        </span>
                        Diffusion Policy <span style="color: red";>fails to pick up the apple</span>
                    </div>
                </div>
            </div>
        </div>

        <hr>
    </div>

    <div style="text-align: center; justify-content: center; margin-top:15px; margin-bottom: 20px;">
        <a href="https://www.flaticon.com/free-icons/clapperboard" title="clapperboard icons">Clapperboard icons created
            by Prosymbols - Flaticon</a>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.poptrox.min.js"></script>
    <script src="assets/js/skel.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
        // Store multiple video comparison instances
        const videoComparisons = {};
        
        // Video sets for all tasks
        const videoSets = {
            task1_gt: [
                {
                    rgb: "videos/task_1/gt_rgb_1.mp4",
                    depth: "videos/task_1/gt_depth_1.mp4",
                    title: "GT"
                },
                {
                    rgb: "videos/task_1/gt_rgb_2.mp4",
                    depth: "videos/task_1/gt_depth_2.mp4",
                    title: "GT"
                }
            ],
            task1_ours: [
                {
                    rgb: "videos/task_1/ours/rgb_1.mp4",
                    depth: "videos/task_1/ours/depth_1.mp4",
                    title: "Result"
                },
                {
                    rgb: "videos/task_1/ours/rgb_2.mp4",
                    depth: "videos/task_1/ours/depth_2.mp4",
                    title: "Result"
                }
            ],
            task2_gt: [
                {
                    rgb: "videos/task_2/gt_rgb_1.mp4",
                    depth: "videos/task_2/gt_depth_1.mp4",
                    title: "GT"
                },
                {
                    rgb: "videos/task_2/gt_rgb_2.mp4",
                    depth: "videos/task_2/gt_depth_2.mp4",
                    title: "GT"
                }
            ],
            task2_ours: [
                {
                    rgb: "videos/task_2/ours/rgb_1.mp4",
                    depth: "videos/task_2/ours/depth_1.mp4",
                    title: "Result"
                },
                {
                    rgb: "videos/task_2/ours/rgb_2.mp4",
                    depth: "videos/task_2/ours/depth_2.mp4",
                    title: "Result"
                }
            ],
            task3_gt: [
                {
                    rgb: "videos/task_3/gt_rgb_1.mp4",
                    depth: "videos/task_3/gt_depth_1.mp4",
                    title: "GT"
                },
                {
                    rgb: "videos/task_3/gt_rgb_2.mp4",
                    depth: "videos/task_3/gt_depth_2.mp4",
                    title: "GT"
                }
            ],
            task3_ours: [
                {
                    rgb: "videos/task_3/ours/rgb_1.mp4",
                    depth: "videos/task_3/ours/depth_1.mp4",
                    title: "Result"
                },
                {
                    rgb: "videos/task_3/ours/rgb_2.mp4",
                    depth: "videos/task_3/ours/depth_2.mp4",
                    title: "Result"
                }
            ]
        };
        
        // Track current video index for each container
        const currentVideoIndexes = {
            1: 0, // task1_gt
            2: 0, // task1_ours
            3: 0, // task2_gt
            4: 0, // task2_ours
            5: 0, // task3_gt
            6: 0  // task3_ours
        };
        
        // Map container IDs to video sets
        const containerToVideoSet = {
            1: 'task1_gt',
            2: 'task1_ours',
            3: 'task2_gt',
            4: 'task2_ours',
            5: 'task3_gt',
            6: 'task3_ours'
        };
        
        function setupVideo(instanceId) {
            if (!videoComparisons[instanceId]) {
                videoComparisons[instanceId] = {
                    videosLoaded: 0,
                    isDragging: false,
                    autoFollow: true,
                    container: null,
                    divider: null,
                    rgbVideo: null,
                    depthVideo: null
                };
            }
            
            videoComparisons[instanceId].videosLoaded++;
            
            if (videoComparisons[instanceId].videosLoaded === 2) {
                initializeDemo(instanceId);
            }
        }

        function initializeDemo(instanceId) {
            const instance = videoComparisons[instanceId];
            
            instance.container = document.getElementById(`container${instanceId}`);
            instance.divider = document.getElementById(`divider${instanceId}`);
            instance.rgbVideo = document.getElementById(`rgbVideo${instanceId}`);
            instance.depthVideo = document.getElementById(`depthVideo${instanceId}`);

            if (!instance.container || !instance.divider || !instance.rgbVideo || !instance.depthVideo) {
                console.error(`Missing elements for instance ${instanceId}`);
                return;
            }

            // Sync video playback
            instance.rgbVideo.addEventListener('play', () => {
                instance.depthVideo.currentTime = instance.rgbVideo.currentTime;
                instance.depthVideo.play().catch(e => console.error(`Depth video ${instanceId} play failed:`, e));
                updatePlayButton(instanceId);
            });

            instance.rgbVideo.addEventListener('pause', () => {
                instance.depthVideo.pause();
                updatePlayButton(instanceId);
            });

            instance.rgbVideo.addEventListener('seeked', () => {
                instance.depthVideo.currentTime = instance.rgbVideo.currentTime;
            });

            // Keep videos in sync during playback
            instance.rgbVideo.addEventListener('timeupdate', () => {
                if (Math.abs(instance.rgbVideo.currentTime - instance.depthVideo.currentTime) > 0.1) {
                    instance.depthVideo.currentTime = instance.rgbVideo.currentTime;
                }
            });

            // Handle video end
            instance.rgbVideo.addEventListener('ended', () => {
                instance.depthVideo.pause();
                updatePlayButton(instanceId);
            });

            setupDragHandlers(instanceId);
            updatePlayButton(instanceId);
            
            // Initialize navigation for containers with navigation
            if (containerToVideoSet[instanceId]) {
                updateNavigation(instanceId);
            }
        }

        function setupDragHandlers(instanceId) {
            const instance = videoComparisons[instanceId];
            
            // Mouse events for divider
            instance.divider.addEventListener('mousedown', (e) => startDrag(e, instanceId));
            
            // Mouse events for container (auto-follow)
            instance.container.addEventListener('mousemove', (e) => handleMouseMoveForInstance(e, instanceId));
            
            // Touch events for mobile
            instance.divider.addEventListener('touchstart', (e) => startDrag(e, instanceId));
        }

        function startDrag(e, instanceId) {
            const instance = videoComparisons[instanceId];
            instance.isDragging = true;
            instance.autoFollow = false;
            e.preventDefault();
            instance.container.style.cursor = 'col-resize';
            
            // Add global event listeners for this specific instance
            const handleMouseMove = (e) => handleMouseMoveForInstance(e, instanceId);
            const handleTouchMove = (e) => handleTouchMoveForInstance(e, instanceId);
            const endDrag = () => endDragForInstance(instanceId, handleMouseMove, handleTouchMove, endDrag);
            
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchmove', handleTouchMove);
            document.addEventListener('touchend', endDrag);
        }

        function handleMouseMoveForInstance(e, instanceId) {
            const instance = videoComparisons[instanceId];
            if (!instance.isDragging && !instance.autoFollow) return;
            
            const rect = instance.container.getBoundingClientRect();
            const isOverContainer = e.clientX >= rect.left && e.clientX <= rect.right && 
                                  e.clientY >= rect.top && e.clientY <= rect.bottom;
            
            if (isOverContainer || instance.isDragging) {
                const x = e.clientX - rect.left;
                const percentage = (x / rect.width) * 100;
                const clampedPercentage = Math.max(0, Math.min(100, percentage));
                updateDividerPosition(instanceId, clampedPercentage);
            }
        }

        function handleTouchMoveForInstance(e, instanceId) {
            const instance = videoComparisons[instanceId];
            if (!instance.isDragging) return;
            e.preventDefault();
            const touch = e.touches[0];
            const rect = instance.container.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const percentage = (x / rect.width) * 100;
            const clampedPercentage = Math.max(0, Math.min(100, percentage));
            updateDividerPosition(instanceId, clampedPercentage);
        }

        function endDragForInstance(instanceId, handleMouseMove, handleTouchMove, endDrag) {
            const instance = videoComparisons[instanceId];
            if (instance.isDragging) {
                instance.isDragging = false;
                instance.container.style.cursor = 'col-resize';
                
                // Remove event listeners
                document.removeEventListener('mousemove', handleMouseMove);
                document.removeEventListener('mouseup', endDrag);
                document.removeEventListener('touchmove', handleTouchMove);
                document.removeEventListener('touchend', endDrag);
                
                setTimeout(() => {
                    instance.autoFollow = true;
                }, 2000); // Re-enable auto-follow after 2 seconds
            }
        }

        function updateDividerPosition(instanceId, percentage) {
            const instance = videoComparisons[instanceId];
            if (!instance.divider || !instance.rgbVideo || !instance.depthVideo) return;
            
            // Move the divider
            instance.divider.style.left = percentage + '%';
            
            // Update clip paths for split effect
            const leftClip = `inset(0 ${100 - percentage}% 0 0)`;
            const rightClip = `inset(0 0 0 ${percentage}%)`;
            
            instance.rgbVideo.style.clipPath = leftClip;
            instance.depthVideo.style.clipPath = rightClip;
        }

        function togglePlayback(instanceId) {
            const instance = videoComparisons[instanceId];
            if (!instance || !instance.rgbVideo || !instance.depthVideo) {
                return;
            }
            
            if (instance.rgbVideo.paused) {
                instance.rgbVideo.play().catch(e => console.error(`Play failed for instance ${instanceId}:`, e));
            } else {
                instance.rgbVideo.pause();
            }
        }

        function updatePlayButton(instanceId) {
            const button = document.getElementById(`playButton${instanceId}`);
            const instance = videoComparisons[instanceId];
            
            if (!button || !instance || !instance.rgbVideo) {
                if (button) button.textContent = 'Play';
                return;
            }
            
            button.textContent = instance.rgbVideo.paused ? 'Play' : 'Pause';
        }

        // Generic video switching function
        function switchVideo(containerId, direction) {
            const videoSetKey = containerToVideoSet[containerId];
            if (!videoSetKey || !videoSets[videoSetKey]) return;
            
            const currentIndex = currentVideoIndexes[containerId];
            const newIndex = currentIndex + direction;
            
            if (newIndex < 0 || newIndex >= videoSets[videoSetKey].length) {
                return;
            }
            
            currentVideoIndexes[containerId] = newIndex;
            
            const rgbVideo = document.getElementById(`rgbVideo${containerId}`);
            const depthVideo = document.getElementById(`depthVideo${containerId}`);
            
            if (!rgbVideo || !depthVideo) {
                console.error(`Video elements not found for container ${containerId}`);
                return;
            }
            
            // Pause current videos
            rgbVideo.pause();
            depthVideo.pause();
            
            // Update video sources
            rgbVideo.src = videoSets[videoSetKey][newIndex].rgb;
            depthVideo.src = videoSets[videoSetKey][newIndex].depth;
            
            // Restart videos
            rgbVideo.load();
            depthVideo.load();
            
            // Update navigation display
            updateNavigation(containerId);
            
            // Reset divider position to center
            updateDividerPosition(containerId, 50);
            
            // Update play button state
            updatePlayButton(containerId);
        }

        function updateNavigation(containerId) {
            const videoSetKey = containerToVideoSet[containerId];
            if (!videoSetKey || !videoSets[videoSetKey]) return;
            
            const currentIndex = currentVideoIndexes[containerId];
            const videoInfo = document.getElementById(`videoInfo${containerId}`);
            const prevBtn = document.getElementById(`prevBtn${containerId}`);
            const nextBtn = document.getElementById(`nextBtn${containerId}`);
            
            if (videoInfo) {
                videoInfo.textContent = `${videoSets[videoSetKey][currentIndex].title} (${currentIndex + 1} of ${videoSets[videoSetKey].length})`;
            }
            
            if (prevBtn) {
                prevBtn.disabled = currentIndex === 0;
            }
            
            if (nextBtn) {
                nextBtn.disabled = currentIndex === videoSets[videoSetKey].length - 1;
            }
        }

        // Individual switching functions for each container
        function switchVideo1(direction) { switchVideo(1, direction); }
        function switchVideo2(direction) { switchVideo(2, direction); }
        function switchVideo3(direction) { switchVideo(3, direction); }
        function switchVideo4(direction) { switchVideo(4, direction); }
        function switchVideo5(direction) { switchVideo(5, direction); }
        function switchVideo6(direction) { switchVideo(6, direction); }

        // Initialize when page loads
        window.addEventListener('load', () => {
            // Initialize references for existing instances
            for (let i = 1; i <= 7; i++) {
                if (document.getElementById(`rgbVideo${i}`)) {
                    if (!videoComparisons[i]) {
                        videoComparisons[i] = {
                            videosLoaded: 0,
                            isDragging: false,
                            autoFollow: true,
                            container: null,
                            divider: null,
                            rgbVideo: null,
                            depthVideo: null
                        };
                    }
                    updatePlayButton(i);
                }
            }
        });
    </script>
</body>

</html>